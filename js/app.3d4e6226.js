(function(){var t={4724:function(t,e,s){"use strict";var a=s(7195),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full h-full items-center justify-center flex-col gap-8 max-h-full max-w-full flex overflow-y-auto relative",attrs:{id:"app"}},[e("Background"),e("Header"),e("Page")],1)},n=[],l=function(){var t=this;t._self._c,t._self._setupProxy;return t._m(0)},r=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"w-full pt-12 z-50 flex items-center flex-col gap-4 justify-center"},[e("img",{staticClass:"flex h-5 w-auto items-center justify-center",attrs:{src:s(4294)}}),e("h1",{staticClass:"text-5xl font-normal text-gray-800"},[t._v("autodistill")])])}],o=s(3911),c=s.n(o),f=c(),d=s(1001),u=(0,d.Z)(f,l,r,!1,null,null,null),m=u.exports,g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full relative inline-flex px-6 sm:px-[10%] lg:px-[20%]"},[t.state==t.st2WaitingForEval?e("div",{staticClass:"absolute left-0 top-0 h-full bg-white inline-flex flex-1 items-center justify-center w-full z-30"},[e("p",{staticClass:"text-xs font-mono text-gray-700"},[t._v(t._s(t.progress))])]):t._e(),e("div",{staticClass:"inline-flex w-full z-20 relative flex-col gap-8"},[t.state==t.st3GotEval?e("div",{staticClass:"modelDropdown inline-flex w-full items-center flex-row gap-4"},[e("p",{staticClass:"text-sm font-medium"},[t._v("Choose Model to Test Annotations:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedModel,expression:"selectedModel"}],staticClass:"inline-flex rounded-md text-sm border border-gray-400 flex-1 py-2 px-3",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedModel=e.target.multiple?s:s[0]}}},t._l(t.availableModels,(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})),0)]):t._e(),e("div",{staticClass:"flex flex-col gap-4"},[t.state!=t.st3GotEval?e("div",{staticClass:"flex flex-row gap-3 items-center font-medium text-[#8315F9]"},[t._m(0),e("p",{staticClass:"text-base text-gray-900 font-medium"},[t._v("Upload Images")])]):t._e(),t.state==t.st0Start?e("div",{staticClass:"w-full bg-white h-[200px] bg-opacity-20 rounded-md border border-gray-400 shadow transition duration-200 p-6 inline-flex justify-center items-center flex-col gap-4",on:{dragover:function(e){return e.preventDefault(),t.onDragOver.apply(null,arguments)},drop:function(e){return e.preventDefault(),t.onDrop.apply(null,arguments)}}},[e("img",{staticClass:"w-8 items-center justify-center flex flex-none",attrs:{src:s(9938)}}),t._m(1)]):t._e(),t.state==t.st1DroppedImages?e("div",{staticClass:"inline-flex flex-col w-full bg-white bg-opacity-30 rounded-md h-[200px] overflow-y-auto border border-gray-400"},[e("div",{staticClass:"w-full sticky top-0 bg-white inline-flex justify-between z-10 py-3 px-4"},[e("p",{staticClass:"font-mono text-xs"},[t._v(t._s(t.images.length)+" Images Uploaded ")]),e("button",{staticClass:"text-xs",on:{click:function(e){return t.clearImages()}}},[t._v("Clear Selection")])]),e("div",{staticClass:"grid-container grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3 md:gap-6 px-4 pb-4"},t._l(t.images,(function(t,s){return e("div",{key:s,staticClass:"grid-item rounded-md rounded-md overflow-hidden border border-gray-200"},[e("img",{attrs:{src:t.src,alt:`Image ${s}`}})])})),0)]):t._e(),t.state==t.st3GotEval?e("div",{staticClass:"inline-flex flex-col w-full"},[e("div",{staticClass:"inline-flex bg-white bg-opacity-40 flex-col gap-4 w-full p-3 rounded-md border border-gray-200 max-w-full"},[e("div",{staticClass:"w-full flex h-[416px] flex-initial items-center justify-center relative"},[t.selectedImage?e("ImageWithPredictions",{staticClass:"z-30",attrs:{image:t.selectedImage.src,predictions:t.selectedPredictions}}):t._e(),t._m(2)],1),e("div",{staticClass:"flex flex-row flex-wrap gap-4 px-4 pb-4"},t._l(t.imagesWithPredictions,(function(s,a){return e("div",{key:a,staticClass:"rounded-md rounded-md bg-fit h-16 w-16 overflow-hidden border border-gray-200"},[e("img",{attrs:{src:s.src,alt:`Image ${a}`},on:{click:function(e){return t.selectImage(s)}}})])})),0)])]):t._e()]),t.state!=t.st3GotEval?e("div",{staticClass:"flex flex-col gap-4"},[t._m(3),t._m(4)]):t._e(),e("div",{staticClass:"flex flex-col gap-4"},[t.state!=t.st3GotEval?e("div",{staticClass:"flex flex-row gap-3 items-center font-medium text-[#8315F9]"},[t._m(5),e("p",{staticClass:"text-base text-gray-900 font-medium"},[t._v("Add Classes")])]):t._e(),t.state==t.st3GotEval?e("div",{staticClass:"flex flex-row gap-3 items-center font-medium text-[#8315F9]"},[t._m(6),e("p",{staticClass:"text-base text-gray-900 font-medium"},[t._v("Edit Classes")])]):t._e(),e("div",{staticClass:"w-full inline-flex items-center justify-center flex-col gap-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.classNames,expression:"classNames"}],staticClass:"inline-flex w-full rounded-md border border-gray-400 text-sm px-3 py-2 flex-1 break-words",attrs:{contenteditable:"",placeholder:"Enter classes..."},domProps:{value:t.classNames},on:{input:function(e){e.target.composing||(t.classNames=e.target.value)}}})])]),e("div",{staticClass:"flex flex-col gap-4"},[t.state!=t.st3GotEval?e("div",{staticClass:"flex flex-row gap-3 items-center font-medium text-[#8315F9]"},[t._m(7),e("p",{staticClass:"text-base text-gray-900 text-gray-800 font-medium"},[t._v("Set Confidence")])]):t._e(),t.state==t.st3GotEval?e("div",{staticClass:"flex flex-row gap-3 items-center font-medium text-[#8315F9]"},[t._m(8),e("p",{staticClass:"text-base text-gray-800 font-medium"},[t._v("Change Confidence")])]):t._e(),t._m(9)]),e("div",{staticClass:"w-full justify-center inline-flex items-center"},[e("button",{staticClass:"w-max bg-[#8315F9] px-3 py-2 rounded-md text-white font-medium text-base",on:{click:t.tryme}},[t._v("Try Me")])])])])},p=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex w-8 h-8 border border-[#8315F9] flex-none justify-center items-center rounded-full"},[e("img",{staticClass:"inline-flex w-3",attrs:{src:s(2351)}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"inline-flex flex-col items-center justify-center gap-3"},[e("h2",{staticClass:"text-base font-normal text-gray-800"},[t._v("Drag and Drop Images")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full inline-flex h-[416px] items-center justify-center absolute left-0 top-0"},[e("p",{staticClass:"text-xs font-mono text-gray-700"},[t._v("Select an image to view annotations.")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-row gap-3 items-center font-medium text-[#8315F9]"},[e("div",{staticClass:"flex w-8 h-8 border border-[#8315F9] flex-none justify-center items-center rounded-full"},[e("img",{staticClass:"inline-flex w-4",attrs:{src:s(7972)}})]),e("p",{staticClass:"text-base text-gray-900 font-medium"},[t._v("Select Task")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full grid grid-cols-1 sm:grid-cols-3 gap-3 lg:gap-6"},[e("div",{staticClass:"card-selected"},[e("div",{staticClass:"flex flex-col"},[e("h3",{staticClass:"font-medium text-[#8315F9] text-base"},[t._v("Object Detection")]),e("p",{staticClass:"text-xs text-gray-800"},[t._v("Find multiple things and their specific location.")])])]),e("div",{staticClass:"card-disabled"},[e("div",{staticClass:"flex flex-col"},[e("h3",{staticClass:"font-medium text-gray-400 text-base"},[t._v("Classification")]),e("p",{staticClass:"text-xs text-gray-400"},[t._v("Assign labels to the entire image.")])])]),e("div",{staticClass:"card-disabled"},[e("div",{staticClass:"flex flex-col"},[e("h3",{staticClass:"font-medium text-gray-400 text-base"},[t._v("Segmentation")]),e("p",{staticClass:"text-xs text-gray-400"},[t._v("Detect multiple objects and their actual shape.")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex w-8 h-8 border border-[#8315F9] flex-none justify-center items-center rounded-full"},[e("img",{staticClass:"inline-flex w-3",attrs:{src:s(3879)}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex w-8 h-8 border border-[#8315F9] flex-none justify-center items-center rounded-full"},[e("img",{staticClass:"inline-flex w-3",attrs:{src:s(3879)}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex w-8 h-8 border border-[#8315F9] flex-none justify-center items-center rounded-full"},[e("img",{staticClass:"inline-flex w-3",attrs:{src:s(9523)}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex w-8 h-8 border border-[#8315F9] flex-none justify-center items-center rounded-full"},[e("img",{staticClass:"inline-flex w-3",attrs:{src:s(9523)}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full inline-flex items-center justify-center flex-col gap-3"},[e("div",{staticClass:"inline-flex w-full"},[e("div",{staticClass:"w-full items-center justify-center inline-flex flex-row gap-6 px-4"},[e("span",{staticClass:"text-xs font-mono text-gray-700"},[t._v("0%")]),e("input",{staticClass:"slider",attrs:{type:"range",min:"1",max:"100",value:"50",id:"myRange"}}),e("span",{staticClass:"text-xs font-mono text-gray-700"},[t._v("100%")])])])])}];s(7658);function x(){const t=1e3*Math.random();return new Promise((e=>setTimeout(e,t)))}const h={},v=[{x:10,y:20,width:80,height:120,class:"car"},{x:20,y:30,width:120,height:80,class:"dog"},{x:30,y:40,width:180,height:220,class:"cat"},{x:40,y:50,width:220,height:180,class:"pig"},{x:50,y:60,width:220,height:180,class:"hat"},{x:60,y:70,width:220,height:180,class:"yes"},{x:70,y:80,width:220,height:180,class:"not"},{x:80,y:90,width:220,height:180,class:"mug"}];function w(t){const e=Object.keys(t),s=e.map((t=>{const e=["groundedSam","clippedSem"],s=e.map((t=>({name:t,status:"waiting"})));return{image_id:t,models:s}}));return s}var y={async uploadImage(t,e,s){await x();const a=h[t]=h[t]||{};a.images=a.images||{};const i=Math.random().toString(16).substring(2);return a.images[i]={imageb64:e,classNames:s},{image_id:i}},async getJobStatus(t,e){await x();const s=h[t],a=s.status=s.status||w(s.images);for(const i of a)for(const t of i.models)"waiting"===t.status&&Math.random()<.5&&(t.status="done",t.annotations=[v[Math.floor(Math.random()*v.length)],v[Math.floor(Math.random()*v.length)]]);return a}};function _(t){return new Promise((e=>setTimeout(e,t)))}var C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"image-container"},[e("canvas",{ref:"canvas"})])},b=[],I={name:"ImageWithRectangle",props:{image:{type:String,required:!0},predictions:{type:Array,required:!0}},mounted(){this.drawImageWithRectangle()},watch:{image(){this.drawImageWithRectangle()},predictions(){this.drawImageWithRectangle()}},methods:{drawImageWithRectangle(){const t=this.$refs.canvas,e=t.getContext("2d"),s=new Image;s.onload=()=>{t.width=s.width,t.height=s.height,e.drawImage(s,0,0),this.predictions.forEach((t=>{const{x:s,y:a,width:i,height:n}=t;e.beginPath(),e.rect(s,a,i,n),e.strokeStyle="red",e.lineWidth=2,e.stroke(),e.fillStyle="red",e.font="16px Arial",e.fillText(t.class,s,a)}))},s.src=this.image}}},j=I,P=(0,d.Z)(j,C,b,!1,null,"3c89cb4e",null),F=P.exports;const M=0,k=1,E=2,D=3;function O(t){let e=0,s=0;for(const a of t)for(const t of a.models)s++,"done"===t.status&&e++;return{countDone:e,countTotal:s}}var S={name:"Page",data(){const t={state:"0",images:[],classNames:"",progress:"",selectedImage:null,availableModels:["a","b","c"],selectedModel:null};return t.st0Start=M,t.st1DroppedImages=k,t.st2WaitingForEval=E,t.st3GotEval=D,t},computed:{imagesWithPredictions(){return this.images.filter((t=>!!t.models))},selectedPredictions(){const t=this.selectedImage,e=this.selectedModel,s=t.models.find((t=>t.name===e));return s.annotations}},methods:{onDragOver(){},onDrop(t){this.images=[];const e=t.dataTransfer.files;Array.from(e).forEach((t=>{if(t.type.startsWith("image/")){const e=new FileReader;e.onload=t=>{this.images.push({src:t.target.result})},e.readAsDataURL(t)}})),this.state=k},clearImages(){this.images=[],this.state=M},async tryme(){this.state=E;const t=""+parseInt(1e12*Math.random());await this._uploadImages(t),await this._waitForEval(t)},async _uploadImages(t){this.progress="uploading images... 0%";const e=this,s=this.classNames.split(",").map((t=>t.trim()));return new Promise((a=>{const i=this;let n=0;const l=this.images.length;this.images.forEach((r=>{const o=this;y.uploadImage(t,r.src,s).then((t=>{const s=this;console.log(e,i,o,s),r.id=t.image_id,n++,n===l?(this.progress="",a()):this.progress=`Uploading images... ${parseInt(100*n/l)}%`}))}))}))},async _waitForEval(t){this.progress="Waiting for magic annotations...";let e=!1;while(!e){const s=await y.getJobStatus(t,this.images.map((t=>t.id))),{countDone:a,countTotal:i}=O(s);if(e=a===i,e){for(const t in s)this.images[t].models=s[t].models;this.availableModels=s[0].models.map((t=>t.name)),this.selectedModel=this.availableModels[0],this.state=D}else this.progress=`Waiting for magic annotations... ${a}/${i}`,await _(1e3)}},selectImage(t){this.selectedImage=t}},components:{ImageWithPredictions:F}},W=S,T=(0,d.Z)(W,g,p,!1,null,null,null),A=T.exports,G=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("img",{staticClass:"w-full z-0 absolute -top-44 left-0",attrs:{src:s(8893)}})},N=[],R=s(2319),Z=s.n(R),$=Z(),z=(0,d.Z)($,G,N,!1,null,null,null),U=z.exports,q={name:"App",components:{Header:m,Page:A,Background:U}},B=q,H=(0,d.Z)(B,i,n,!1,null,null,null),J=H.exports;a.ZP.config.productionTip=!1,new a.ZP({render:t=>t(J)}).$mount("#app")},2319:function(){},3911:function(){},8893:function(t,e,s){"use strict";t.exports=s.p+"img/gradient.a6368bb8.svg"},3879:function(t,e,s){"use strict";t.exports=s.p+"img/list.0fb61599.svg"},9523:function(t,e,s){"use strict";t.exports=s.p+"img/slider.7bd63673.svg"},7972:function(t,e,s){"use strict";t.exports=s.p+"img/telescope.c805666f.svg"},2351:function(t,e,s){"use strict";t.exports=s.p+"img/upload.6faa025f.svg"},4294:function(t,e,s){"use strict";t.exports=s.p+"img/roboflow-purple.ceef8fc8.png"},9938:function(t,e,s){"use strict";t.exports=s.p+"img/upload.604e190f.png"}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,n){if(!a){var l=1/0;for(f=0;f<t.length;f++){a=t[f][0],i=t[f][1],n=t[f][2];for(var r=!0,o=0;o<a.length;o++)(!1&n||l>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[o])}))?a.splice(o--,1):(r=!1,n<l&&(l=n));if(r){t.splice(f--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var f=t.length;f>0&&t[f-1][2]>n;f--)t[f]=t[f-1];t[f]=[a,i,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.p=""}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,n,l=a[0],r=a[1],o=a[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(o)var f=o(s)}for(e&&e(a);c<l.length;c++)n=l[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(f)},a=self["webpackChunkvueclip"]=self["webpackChunkvueclip"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(4724)}));a=s.O(a)})();
//# sourceMappingURL=app.3d4e6226.js.map